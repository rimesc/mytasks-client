<messages [messages]="messages"></messages>
<div *ngIf="task">
	<div class="project-header">
		<a routerLink="/projects/{{task.project.id}}">{{task.project.name}}</a>
	</div>
	<div class="btn-toolbar pull-right">
		<div class="btn-group" role="group">
			<button type="submit" class="btn btn-secondary" *ngFor="let transition of availableTransitions()" (click)="performTransition(transition)">{{transition.label}}</button>
		</div>
		<div class="btn-group" role="group">
			<button class="btn btn-secondary" (click)="editTask()">
				<fa name="edit"></fa>
			</button>
			<button class="btn btn-secondary" (click)="deleteTask()">
				<fa name="trash"></fa>
			</button>
		</div>
	</div>
	<state-badge [state]="task.state"></state-badge>
	<h1 class="page-header">{{task.summary}}</h1>
	<div>
		<span class="text-muted small-caps"><fa name="warning"></fa> {{priorities[task.priority] | titlecase}} priority</span>
		<span *ngIf="task.tags && task.tags.length > 0">
		<span class="divider">|</span>
		<tags [tags]="task.tags"></tags>
		</span>
	</div>
	<div class="readme">
		<h2><span>Notes</span></h2>
		<markdown-view [notes]="task.notes" (update)="updateNotes($event)"></markdown-view>
	</div>
</div>